<script src="js/project.js"></script>
<link rel="stylesheet" href="style/project.css">
<h1 localizable>My Projects</h1>
<div class="bar">
@param actionPage=my_projects
@include=search_bar
@include=paginator
</div>
<div class="${className} list pure-g"></div>
<script>
    ${className}_loadPage =
        function (term, pageSize, pageNumber, onSuccess) {
            SnapCloud.withCredentialsRequest(
                'GET',
                '/projects/%username?updatingnotes=true&pagesize=' + pageSize +
                '&page=' + pageNumber + '&withthumbnail=true&matchtext=' +
                (term ? term : ''),
                onSuccess,
                genericError,
                'Could not fetch project list'
            );
        };

    ${className}_onLoadPage =
        function (response, targetElement) {
            response.projects.forEach(function (project) {
                targetElement.append(
                    newProjectDiv(
                        project, 
                        { 
                            size: 'small', 
                            gridSize: 5, 
                            extraFields: {
                                isPublic: 'ispublic',
                                isPublished: 'ispublished'
                            }
                        }
                    )
                );
            });
        };

    ${className}_initSearch();
</script>
